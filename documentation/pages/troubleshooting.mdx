# Troubleshooting

Having issues with Maraikka? This comprehensive troubleshooting guide covers common problems and their solutions.

## Quick Fixes

### Most Common Issues

| Problem | Quick Solution |
|---------|---------------|
| App won't start | Restart computer, check system requirements |
| Encryption fails | Close file in other apps, check disk space |
| Decryption fails | Verify password, check file integrity |
| Preview not working | Update system, check file format support |
| Slow performance | Close other apps, use SSD storage |

## Installation Issues

### Windows Installation Problems

#### "Windows protected your PC" Warning
**Problem**: SmartScreen blocks installation
**Solution**:
1. Click **"More info"**
2. Click **"Run anyway"**
3. Alternatively, download from Microsoft Store

#### Installation Fails with Error Code
**Problem**: NSIS installer errors
**Solutions**:
```powershell
# Run as Administrator
Right-click installer → "Run as administrator"

# Clear Windows Installer cache
rd /s /q "%WINDIR%\Installer\$PatchCache$"

# Disable antivirus temporarily during installation
```

#### Context Menu Not Working
**Problem**: Right-click menu missing "Encrypt with Maraikka"
**Solution**:
```powershell
# Re-register context menu (run as Administrator)
cd "C:\Program Files\Maraikka"
.\windows-context\install-context-menu.ps1
```

### macOS Installation Problems

#### "Cannot be opened because it is from an unidentified developer"
**Problem**: Gatekeeper blocking unsigned app
**Solution**:
1. **Right-click** the app → **"Open"**
2. Click **"Open"** in the dialog
3. Or disable Gatekeeper temporarily:
```bash
sudo spctl --master-disable
# Re-enable after installation:
sudo spctl --master-enable
```

#### Services Menu Missing
**Problem**: macOS Services not showing Maraikka options
**Solution**:
```bash
# Refresh Services menu
/System/Library/CoreServices/pbs -flush

# Or manually install services
cp -r "/Applications/Maraikka.app/Contents/Resources/Services/"* "~/Library/Services/"
```

#### Notarization Issues
**Problem**: App damaged or can't verify developer
**Solution**:
```bash
# Clear quarantine attribute
xattr -cr /Applications/Maraikka.app

# Or download from Mac App Store
```

### Linux Installation Problems

#### AppImage Won't Run
**Problem**: Permission denied or missing dependencies
**Solutions**:
```bash
# Make executable
chmod +x Maraikka-*.AppImage

# Install FUSE if missing
sudo apt install fuse  # Ubuntu/Debian
sudo dnf install fuse  # Fedora

# Run with --appimage-extract-and-run if FUSE unavailable
./Maraikka-*.AppImage --appimage-extract-and-run
```

#### DEB Package Conflicts
**Problem**: Dependency conflicts during installation
**Solutions**:
```bash
# Fix broken dependencies
sudo apt --fix-broken install

# Force install if necessary
sudo dpkg -i --force-depends Maraikka-*.deb

# Install missing dependencies
sudo apt install -f
```

## Application Startup Issues

### App Won't Launch

#### Check System Requirements
**Minimum Requirements:**
- **RAM**: 4 GB
- **Storage**: 500 MB free space
- **OS**: Windows 10+, macOS 10.14+, Linux (Ubuntu 18.04+)

#### Clear Application Data
**Windows**:
```powershell
# Clear app data
rd /s /q "%APPDATA%\Maraikka"
rd /s /q "%LOCALAPPDATA%\Maraikka"
```

**macOS**:
```bash
# Clear app data
rm -rf ~/Library/Application\ Support/Maraikka
rm -rf ~/Library/Preferences/com.maraikka.app.plist
```

**Linux**:
```bash
# Clear app data
rm -rf ~/.config/Maraikka
rm -rf ~/.local/share/Maraikka
```

#### Check for Conflicting Software
- **Antivirus**: May block Maraikka execution
- **Firewall**: May prevent app startup
- **Other encryption tools**: May conflict with file operations

### Crash on Startup

#### Enable Debug Mode
```bash
# Windows
Maraikka.exe --dev

# macOS
/Applications/Maraikka.app/Contents/MacOS/Maraikka --dev

# Linux
./Maraikka-*.AppImage --dev
```

#### Check System Logs
**Windows**: Event Viewer → Application Logs
**macOS**: Console.app → System Reports
**Linux**: `journalctl -f` or `/var/log/syslog`

## Encryption/Decryption Issues

### Encryption Failures

#### "Encryption Failed" Error
**Common Causes & Solutions:**

1. **Insufficient Disk Space**
   ```bash
   # Check available space (need 2x file size)
   df -h  # Linux/macOS
   dir   # Windows
   ```

2. **File in Use**
   - Close file in other applications
   - Check for background processes using the file
   - Restart computer if necessary

3. **Permission Issues**
   ```bash
   # Check file permissions
   ls -la filename  # Linux/macOS
   icacls filename  # Windows
   
   # Fix permissions
   chmod 644 filename  # Linux/macOS
   takeown /f filename  # Windows
   ```

4. **Corrupted File**
   - Verify file integrity
   - Try copying file to new location
   - Check disk for errors

#### "Password Too Weak" Warning
**Solution**: Strengthen your password
- **Minimum 12 characters** (6 required)
- **Mix character types**: uppercase, lowercase, numbers, symbols
- **Avoid common patterns**: dictionary words, personal info

#### Slow Encryption Performance
**Optimization Tips:**
1. **Close other applications** to free resources
2. **Use SSD storage** for better I/O performance
3. **Encrypt smaller batches** instead of huge directories
4. **Ensure adequate RAM** (8GB+ recommended)
5. **Check for background processes** consuming CPU

### Decryption Failures

#### "Invalid Password" Error
**Troubleshooting Steps:**
1. **Verify password carefully** - check caps lock, keyboard layout
2. **Try password variations** - consider typos during encryption
3. **Check file integrity** - ensure `.enc` file isn't corrupted
4. **Verify file format** - ensure it's a valid Maraikka encrypted file

#### "File Corrupted" Error
**Recovery Options:**
1. **Try backup copies** of the encrypted file
2. **Check disk for errors**:
   ```bash
   # Windows
   chkdsk C: /f
   
   # macOS
   diskutil verifyDisk disk0
   
   # Linux
   fsck /dev/sda1
   ```
3. **Use file recovery tools** if available
4. **Contact support** with file details (don't send the file)

#### Partial Decryption
**Problem**: File decrypts but appears corrupted
**Solutions**:
1. **Verify original file type** before encryption
2. **Check for encoding issues** with text files
3. **Try different applications** to open the file
4. **Ensure complete decryption** process finished

## File Preview Issues

### Preview Not Working

#### Supported File Types
**Images**: JPG, PNG, GIF, WebP, SVG
**Videos**: MP4, WebM, MOV, AVI
**Documents**: PDF
**Text**: TXT, MD, JSON, CSV

#### Common Solutions
1. **Update system codecs**:
   ```bash
   # Windows - Install K-Lite Codec Pack
   # macOS - Usually works out of box
   # Linux - Install multimedia codecs
   sudo apt install ubuntu-restricted-extras  # Ubuntu
   ```

2. **Check file associations**
3. **Verify file isn't corrupted**
4. **Try opening file externally** to confirm it works

### PDF Preview Issues

#### PDF Won't Load
**Solutions**:
1. **Update PDF.js** (built into Maraikka)
2. **Check PDF file integrity**
3. **Try smaller PDF files** first
4. **Ensure adequate memory** for large PDFs

#### Slow PDF Rendering
**Optimization**:
- **Close preview panel** when not needed
- **Use list view** instead of grid view
- **Reduce PDF file size** if possible

## Text Editor Issues

### Editor Won't Open

#### File Association Problems
**Solutions**:
1. **Check file permissions** - ensure read/write access
2. **Verify file encoding** - try UTF-8 encoding
3. **Check file size** - very large files may cause issues
4. **Try different file types** to isolate the problem

#### Encrypted File Editor Issues
**Problem**: Can't edit encrypted text files
**Solutions**:
1. **Verify password** is correct
2. **Check file was encrypted** as text file originally
3. **Try decrypting first** then editing
4. **Ensure file isn't binary** format

### Editor Performance Issues

#### Slow Text Editing
**Optimization**:
1. **Close other applications**
2. **Reduce file size** if very large
3. **Disable syntax highlighting** for huge files
4. **Use external editor** for very large files

## Image Editor Issues

### Image Editor Won't Open

#### Supported Image Formats
**Supported**: JPG, PNG, GIF, WebP, SVG, BMP
**Not Supported**: RAW formats, HEIC (convert first)

#### Common Solutions
1. **Convert image format** if unsupported
2. **Check image file integrity**
3. **Reduce image size** if very large
4. **Ensure adequate memory**

### Drawing Tools Not Working

#### Canvas Issues
**Solutions**:
1. **Check browser compatibility** (uses HTML5 Canvas)
2. **Update graphics drivers**
3. **Try different drawing tools**
4. **Restart image editor**

## Hardware Authentication Issues (Premium)

### Authenticator Not Detected

#### FIDO2 Device Issues
**Troubleshooting**:
1. **Check device compatibility** - ensure FIDO2 support
2. **Update device firmware** if available
3. **Try different USB port** for physical keys
4. **Check browser compatibility** for WebAuthn

#### Platform Authenticator Issues
**Touch ID (macOS)**:
```bash
# Reset Touch ID
sudo dscl . -delete /Users/$USER AuthenticationAuthority
```

**Windows Hello**:
```powershell
# Reset Windows Hello
Remove-WindowsCapability -Online -Name "Hello.Face.18967~~~~0.0.1.0"
```

### Authentication Failures

#### Setup Issues
**Solutions**:
1. **Re-register authenticator** in preferences
2. **Clear existing registrations** and start fresh
3. **Check for multiple authenticators** causing conflicts
4. **Verify license key** is valid for hardware auth

## Performance Issues

### General Slowness

#### System Optimization
1. **Close unnecessary applications**
2. **Free up disk space** (need 20%+ free)
3. **Restart computer** to clear memory
4. **Check for malware** with antivirus scan

#### Maraikka-Specific Optimization
1. **Close preview panel** when not needed
2. **Use list view** instead of grid view
3. **Limit directory size** for better performance
4. **Clear application cache** periodically

### Memory Issues

#### High Memory Usage
**Solutions**:
1. **Close other applications** to free RAM
2. **Process smaller file batches**
3. **Restart Maraikka** periodically
4. **Upgrade system RAM** if consistently low

#### Memory Leaks
**Symptoms**: Memory usage increases over time
**Solutions**:
1. **Restart Maraikka** regularly
2. **Update to latest version**
3. **Report issue** with system details

## Network and Update Issues

### Auto-Update Failures

#### Update Download Issues
**Solutions**:
1. **Check internet connection**
2. **Disable VPN** temporarily
3. **Check firewall settings**
4. **Download manually** from GitHub releases

#### Update Installation Issues
**Solutions**:
1. **Close Maraikka** completely before updating
2. **Run as administrator** (Windows)
3. **Check disk space** for update files
4. **Disable antivirus** temporarily during update

## Getting Help

### Before Contacting Support

#### Gather System Information
1. **Operating System** and version
2. **Maraikka version** (Help → About)
3. **Error messages** (exact text)
4. **Steps to reproduce** the issue
5. **System specifications** (RAM, storage, etc.)

#### Try Basic Troubleshooting
1. **Restart Maraikka**
2. **Restart computer**
3. **Update to latest version**
4. **Check system requirements**

### Support Channels

#### Community Support
- **[GitHub Issues](https://github.com/maraikka-labs/maraikka-app/issues)**: Report bugs and request features
- **[GitHub Discussions](https://github.com/maraikka-labs/maraikka-app/discussions)**: Ask questions and share tips

#### Professional Support
- **Premium License Holders**: Priority email support
- **Enterprise Users**: Dedicated support channels
- **Security Issues**: security@maraikka.com

### Creating Effective Bug Reports

#### Include This Information
```
**System Information:**
- OS: [Windows 11 / macOS 13.0 / Ubuntu 22.04]
- Maraikka Version: [1.0.0]
- Hardware: [RAM, CPU, Storage type]

**Issue Description:**
- What you were trying to do
- What happened instead
- Error messages (exact text)

**Steps to Reproduce:**
1. Step one
2. Step two
3. Step three

**Additional Context:**
- Screenshots if helpful
- Log files if available
- Workarounds you've tried
```

## FAQ

### Frequently Asked Questions

#### Q: Can I recover files if I forget the password?
**A**: No, passwords cannot be recovered by design. This ensures maximum security but means you must remember or securely store your passwords.

#### Q: Why is encryption/decryption slow?
**A**: Large files, slow storage (HDD vs SSD), insufficient RAM, or other running applications can affect performance.

#### Q: Can I encrypt files on network drives?
**A**: Yes, but performance may be slower. Ensure stable network connection and adequate permissions.

#### Q: Is it safe to store encrypted files in cloud storage?
**A**: Yes, encrypted files are safe in cloud storage as long as you use strong passwords and the cloud provider is reputable.

#### Q: Can I use Maraikka on multiple computers?
**A**: Yes, Maraikka can be installed on multiple computers. Encrypted files can be moved between systems.

#### Q: What happens if Maraikka is discontinued?
**A**: Maraikka is open source. The encryption format is documented, and you can always build from source or use the decryption algorithms independently.

---

**Still having issues?** Don't hesitate to [open an issue](https://github.com/maraikka-labs/maraikka-app/issues) on GitHub with detailed information about your problem. 🚀 